(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var random_1 = require("./utils/random");
var canvas = document.createElement('canvas');
var slider = document.createElement('input');
var gl = canvas.getContext('webgl');
if (gl == null) {
    throw new Error('gl context could not be obtained');
}
if (gl.getExtension('OES_texture_float') == null) {
    throw new Error('FLOAT Texture extension not available');
}
var RADIUS = 12;
var AREA = [800, 450];
var SIDE = 16;
var bufDimensions = [SIDE, SIDE];
var COUNT = bufDimensions[0] * bufDimensions[1];
var positions = new Float32Array(COUNT * 4);
var velocities = new Float32Array(COUNT * 4);
for (var i = 0; i < positions.length; i += 4) {
    positions[i] = AREA[0] / 2;
    positions[i + 1] = 0;
    velocities[i] = random_1.randNum(-300, 300);
    velocities[i + 1] = random_1.randNum(100, 600);
}
var settings = {
    K: 0.09,
    G: 980,
    color: [.2, .4, .8],
};
var vsrc = "\nprecision mediump float;\n\nattribute vec2 a_vertices;\n\nvoid main () {\n  gl_Position = vec4(a_vertices, 1.0, 1.0);\n}\n";
var fsrc = "\nprecision mediump float;\n\nuniform float u_time;\nuniform float u_K;\nuniform vec3 u_color;\nuniform sampler2D u_positions;\n\nconst float RADIUS = " + RADIUS + ".;\nconst float FRACTION = 1. / " + SIDE + ".;\n\nfloat sdf_sphere ( float r, vec2 c, vec2 p ) {\n  return distance(p, c) - r;\n}\n\nvoid main () {\n  vec2 p = gl_FragCoord.xy;\n  vec2 pos;\n  vec2 tex_coord;\n  float dist = 0.;\n\n  for ( float i = 0.; i < 1.; i += FRACTION ) {\n    for ( float j = 0.; j < 1.; j += FRACTION ) {\n      tex_coord.x = i;\n      tex_coord.y = j;\n      pos = texture2D(u_positions, tex_coord).xy;\n      // THIS IS SLOW because using pos requires the texture read to actually be done\n      dist += exp(-u_K * sdf_sphere(RADIUS, pos, p));\n    }\n    if ( dist >= 1. ) break;\n  }\n  dist = -log(dist) / u_K;\n  float opacity = clamp(.5 - dist, 0.0, 1.0);\n\n  gl_FragColor = vec4(u_color, opacity);\n}\n";
var vertex = gl.createShader(gl.VERTEX_SHADER);
var fragment = gl.createShader(gl.FRAGMENT_SHADER);
var program = gl.createProgram();
var screenQuad = new Float32Array([
    -1, 1, -1, -1, 1, -1,
    -1, 1, 1, -1, 1, 1
]);
var quadSize = screenQuad.length / 2;
if (vertex == null && fragment == null && program == null) {
    throw new Error('gl resources could not be obtained');
}
gl.shaderSource(vertex, vsrc);
gl.compileShader(vertex);
gl.shaderSource(fragment, fsrc);
gl.compileShader(fragment);
gl.attachShader(program, vertex);
gl.attachShader(program, fragment);
gl.linkProgram(program);
gl.useProgram(program);
if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
    console.log(gl.getShaderInfoLog(vertex));
    console.log(gl.getShaderInfoLog(fragment));
    console.log(gl.getProgramInfoLog(program));
}
var verticesBuffer = gl.createBuffer();
var a_locations = {
    a_vertices: gl.getAttribLocation(program, 'a_vertices')
};
var u_locations = {
    u_K: gl.getUniformLocation(program, 'u_K'),
    u_color: gl.getUniformLocation(program, 'u_color'),
    u_time: gl.getUniformLocation(program, 'u_time'),
    u_positions: gl.getUniformLocation(program, 'u_positions')
};
var ps = gl.createTexture();
// const pfb = gl.createFrameBuffer()
gl.bindBuffer(gl.ARRAY_BUFFER, verticesBuffer);
gl.enableVertexAttribArray(a_locations.a_vertices);
gl.vertexAttribPointer(a_locations.a_vertices, 2, gl.FLOAT, false, 0, 0);
gl.bufferData(gl.ARRAY_BUFFER, screenQuad, gl.STATIC_DRAW);
gl.activeTexture(gl.TEXTURE0);
gl.bindTexture(gl.TEXTURE_2D, ps);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, bufDimensions[0], bufDimensions[1], 0, gl.RGBA, gl.FLOAT, positions);
// gl.bindFramebuffer(gl.FRAMEBUFFER, pfb)
// gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, ps, 0)
slider.type = 'range';
slider.min = '0';
slider.max = '1000';
slider.step = '50';
slider.value = settings.G.toString();
slider.addEventListener('input', function (_) { return settings.G = Number(slider.value); });
canvas.width = AREA[0];
canvas.height = AREA[1];
canvas.style.boxSizing = 'border-box';
canvas.style.border = '2px solid Coral';
document.body.style.margin = '0';
document.body.style.backgroundColor = 'MistyRose';
document.body.appendChild(canvas);
document.body.appendChild(slider);
gl.viewport(0, 0, AREA[0], AREA[1]);
gl.enable(gl.CULL_FACE);
gl.clearColor(0, 0, 0, 0);
gl.useProgram(program);
var raf = window.requestAnimationFrame;
var clock = { then: Date.now(), now: Date.now() };
raf(function render() {
    clock.then = clock.now;
    clock.now = Date.now();
    for (var i = 0, G = -settings.G, dT = (clock.now - clock.then) / 1000; i < positions.length; i += 4) {
        if (positions[i + 1] < Math.random() * -100) {
            velocities[i + 1] = random_1.randNum(600, 900);
            positions[i] = AREA[0] / 2;
            positions[i + 1] = 0;
        }
        else {
            velocities[i + 1] += dT * G;
            positions[i] += dT * velocities[i];
            positions[i + 1] += dT * velocities[i + 1];
        }
    }
    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
    gl.uniform1f(u_locations.u_time, clock.now);
    gl.uniform1f(u_locations.u_K, settings.K);
    gl.uniform3f(u_locations.u_color, settings.color[0], settings.color[1], settings.color[2]);
    gl.uniform1i(u_locations.u_positions, 0);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, bufDimensions[0], bufDimensions[1], 0, gl.RGBA, gl.FLOAT, positions);
    gl.drawArrays(gl.TRIANGLES, 0, quadSize);
    raf(render);
});

},{"./utils/random":2}],2:[function(require,module,exports){
"use strict";
function randInt(min, max) {
    return Math.floor(Math.random() * (max - min) + min);
}
exports.randInt = randInt;
function randNum(min, max) {
    return Math.random() * (max - min) + min;
}
exports.randNum = randNum;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Vzci9saWIvbm9kZV9tb2R1bGVzL3dhdGNoaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi50cyIsInNyYy91dGlscy9yYW5kb20udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQUEseUNBQWlEO0FBR2pELElBQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUE7QUFDL0MsSUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQTtBQUM5QyxJQUFNLEVBQUUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0FBRXJDLEVBQUUsQ0FBQyxDQUFFLEVBQUUsSUFBSSxJQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ2pCLE1BQU0sSUFBSSxLQUFLLENBQUMsa0NBQWtDLENBQUMsQ0FBQTtBQUNyRCxDQUFDO0FBRUQsRUFBRSxDQUFDLENBQUUsRUFBRSxDQUFDLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLElBQUssQ0FBQyxDQUFDLENBQUM7SUFDbkQsTUFBTSxJQUFJLEtBQUssQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFBO0FBQzFELENBQUM7QUFFRCxJQUFNLE1BQU0sR0FBRyxFQUFFLENBQUE7QUFDakIsSUFBTSxJQUFJLEdBQUcsQ0FBRSxHQUFHLEVBQUUsR0FBRyxDQUFFLENBQUE7QUFDekIsSUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFBO0FBQ2YsSUFBTSxhQUFhLEdBQUcsQ0FBRSxJQUFJLEVBQUUsSUFBSSxDQUFFLENBQUE7QUFDcEMsSUFBTSxLQUFLLEdBQUcsYUFBYSxDQUFDLENBQUMsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtBQUNqRCxJQUFNLFNBQVMsR0FBRyxJQUFJLFlBQVksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUE7QUFDN0MsSUFBTSxVQUFVLEdB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QUVuRCxHQUFHLENBQUM7SUFDRixLQUFLLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUE7SUFDdEIsS0FBSyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUE7SUFFdEIsR0FBRyxDQUFDLENBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUUsS0FBSyxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFFLEdBQUcsSUFBSSxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUcsQ0FBQztRQUN4RyxFQUFFLENBQUMsQ0FBRSxTQUFTLENBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBRSxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUksQ0FBQyxDQUFDLENBQUM7WUFDaEQsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxnQkFBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQTtZQUNyQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtZQUMxQixTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUN0QixDQUFDO1FBQ0QsSUFBSSxDQUFDLENBQUM7WUFDSixVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUE7WUFDM0IsU0FBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUE7WUFDbEMsU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQTtRQUM1QyxDQUFDO0lBQ0gsQ0FBQztJQUNELEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLGdCQUFnQixHQUFHLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO0lBQ25ELEVBQUUsQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDM0MsRUFBRSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUN6QyxFQUFFLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtJQUMxRixFQUFFLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFDeEMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQTtJQUM3RyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFBO0lBQ3hDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQTtBQUNiLENBQUMsQ0FBQyxDQUFBOzs7O0FDL0xGLGlCQUEwQixHQUFXLEVBQUUsR0FBVztJQUNoRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBRSxHQUFHLEdBQUcsR0FBRyxDQUFFLEdBQUcsR0FBRyxDQUFDLENBQUE7QUFDeEQsQ0FBQztBQUZELDBCQUVDO0FBRUQsaUJBQTBCLEdBQVcsRUFBRSxHQUFXO0lBQ2hELE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBRSxHQUFHLEdBQUcsR0FBRyxDQUFFLEdBQUcsR0FBRyxDQUFBO0FBQzVDLENBQUM7QUFGRCwwQkFFQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgeyByYW5kSW50LCByYW5kTnVtIH0gZnJvbSAnLi91dGlscy9yYW5kb20nXG5pbXBvcnQgeyB3cmFwIH0gZnJvbSAnLi91dGlscy9yYW5nZSdcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbmNvbnN0IHNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbmNvbnN0IGdsID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJylcblxuaWYgKCBnbCA9PSBudWxsICkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ2dsIGNvbnRleHQgY291bGQgbm90IGJlIG9idGFpbmVkJylcbn1cblxuaWYgKCBnbC5nZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2Zsb2F0JykgPT0gbnVsbCApIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdGTE9BVCBUZXh0dXJlIGV4dGVuc2lvbiBub3QgYXZhaWxhYmxlJykgXG59XG5cbmNvbnN0IFJBRElVUyA9IDEyXG5jb25zdCBBUkVBID0gWyA4MDAsIDQ1MCBdXG5jb25zdCBTSURFID0gMTZcbmNvbnN0IGJ1ZkRpbWVuc2lvbnMgPSBbIFNJREUsIFNJREUgXVxuY29uc3QgQ09VTlQgPSBidWZEaW1lbnNpb25zWzBdICogYnVmRGltZW5zaW9uc1sxXVxuY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShDT1VOVCAqIDQpXG5jb25zdCB2ZWxvY2l0aWVzID0gbmV3IEZsb2F0MzJBcnJheShDT1VOVCAqIDQpXG5cbmZvciAoIHZhciBpID0gMDsgaSA8IHBvc2l0aW9ucy5sZW5ndGg7IGkgKz0gNCApIHtcbiAgcG9zaXRpb25zW2ldID0gQVJFQVswXSAvIDJcbiAgcG9zaXRpb25zW2kgKyAxXSA9IDBcbiAgdmVsb2NpdGllc1tpXSA9IHJhbmROdW0oLTMwMCwgMzAwKVxuICB2ZWxvY2l0aWVzW2kgKyAxXSA9IHJhbmROdW0oMTAwLCA2MDApXG59XG5cbmNvbnN0IHNldHRpbmdzID0ge1xuICBLOiAwLjA5LFxuICBHOiA5ODAsIFxuICBjb2xvcjogWyAuMiwgLjQsIC44IF0sXG59XG5cbmNvbnN0IHZzcmMgPSBcbmBcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG5hdHRyaWJ1dGUgdmVjMiBhX3ZlcnRpY2VzO1xuXG52b2lkIG1haW4gKCkge1xuICBnbF9Qb3NpdGlvbiA9IHZlYzQoYV92ZXJ0aWNlcywgMS4wLCAxLjApO1xufVxuYFxuXG5jb25zdCBmc3JjID1cbmBcbnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuXG51bmlmb3JtIGZsb2F0IHVfdGltZTtcbnVuaWZvcm0gZmxvYXQgdV9LO1xudW5pZm9ybSB2ZWMzIHVfY29sb3I7XG51bmlmb3JtIHNhbXBsZXIyRCB1X3Bvc2l0aW9ucztcblxuY29uc3QgZmxvYXQgUkFESVVTID0gJHsgUkFESVVTIH0uO1xuY29uc3QgZmxvYXQgRlJBQ1RJT04gPSAxLiAvICR7IFNJREUgfS47XG5cbmZsb2F0IHNkZl9zcGhlcmUgKCBmbG9hdCByLCB2ZWMyIGMsIHZlYzIgcCApIHtcbiAgcmV0dXJuIGRpc3RhbmNlKHAsIGMpIC0gcjtcbn1cblxudm9pZCBtYWluICgpIHtcbiAgdmVjMiBwID0gZ2xfRnJhZ0Nvb3JkLnh5O1xuICB2ZWMyIHBvcztcbiAgdmVjMiB0ZXhfY29vcmQ7XG4gIGZsb2F0IGRpc3QgPSAwLjtcblxuICBmb3IgKCBmbG9hdCBpID0gMC47IGkgPCAxLjsgaSArPSBGUkFDVElPTiApIHtcbiAgICBmb3IgKCBmbG9hdCBqID0gMC47IGogPCAxLjsgaiArPSBGUkFDVElPTiApIHtcbiAgICAgIHRleF9jb29yZC54ID0gaTtcbiAgICAgIHRleF9jb29yZC55ID0gajtcbiAgICAgIHBvcyA9IHRleHR1cmUyRCh1X3Bvc2l0aW9ucywgdGV4X2Nvb3JkKS54eTtcbiAgICAgIC8vIFRISVMgSVMgU0xPVyBiZWNhdXNlIHVzaW5nIHBvcyByZXF1aXJlcyB0aGUgdGV4dHVyZSByZWFkIHRvIGFjdHVhbGx5IGJlIGRvbmVcbiAgICAgIGRpc3QgKz0gZXhwKC11X0sgKiBzZGZfc3BoZXJlKFJBRElVUywgcG9zLCBwKSk7XG4gICAgfVxuICAgIGlmICggZGlzdCA+PSAxLiApIGJyZWFrO1xuICB9XG4gIGRpc3QgPSAtbG9nKGRpc3QpIC8gdV9LO1xuICBmbG9hdCBvcGFjaXR5ID0gY2xhbXAoLjUgLSBkaXN0LCAwLjAsIDEuMCk7XG5cbiAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh1X2NvbG9yLCBvcGFjaXR5KTtcbn1cbmBcblxuY29uc3QgdmVydGV4ID0gZ2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpXG5jb25zdCBmcmFnbWVudCA9IGdsLmNyZWF0ZVNoYWRlcihnbC5GUkFHTUVOVF9TSEFERVIpXG5jb25zdCBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpXG5jb25zdCBzY3JlZW5RdWFkID0gbmV3IEZsb2F0MzJBcnJheShbXG4gIC0xLCAxLCAtMSwgLTEsIDEsIC0xLFxuICAtMSwgMSwgMSwgLTEsIDEsIDFcbl0pIFxuY29uc3QgcXVhZFNpemUgPSBzY3JlZW5RdWFkLmxlbmd0aCAvIDIgXG5cbmlmICggdmVydGV4ID09IG51bGwgJiYgZnJhZ21lbnQgPT0gbnVsbCAmJiBwcm9ncmFtID09IG51bGwgKSB7XG4gIHRocm93IG5ldyBFcnJvcignZ2wgcmVzb3VyY2VzIGNvdWxkIG5vdCBiZSBvYnRhaW5lZCcpXG59XG5cbmdsLnNoYWRlclNvdXJjZSh2ZXJ0ZXgsIHZzcmMpXG5nbC5jb21waWxlU2hhZGVyKHZlcnRleClcbmdsLnNoYWRlclNvdXJjZShmcmFnbWVudCwgZnNyYylcbmdsLmNvbXBpbGVTaGFkZXIoZnJhZ21lbnQpXG5cbmdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXgpXG5nbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnQpXG5nbC5saW5rUHJvZ3JhbShwcm9ncmFtKVxuZ2wudXNlUHJvZ3JhbShwcm9ncmFtKVxuXG5pZiAoICFnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSApIHtcbiAgY29uc29sZS5sb2coZ2wuZ2V0U2hhZGVySW5mb0xvZyh2ZXJ0ZXgpKVxuICBjb25zb2xlLmxvZyhnbC5nZXRTaGFkZXJJbmZvTG9nKGZyYWdtZW50KSlcbiAgY29uc29sZS5sb2coZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSkpXG59XG5cbmNvbnN0IHZlcnRpY2VzQnVmZmVyID0gZ2wuY3JlYXRlQnVmZmVyKClcbmNvbnN0IGFfbG9jYXRpb25zID0ge1xuICBhX3ZlcnRpY2VzOiBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAnYV92ZXJ0aWNlcycpXG59XG5jb25zdCB1X2xvY2F0aW9ucyA9IHtcbiAgdV9LOiBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfSycpIGFzIFdlYkdMVW5pZm9ybUxvY2F0aW9uLFxuICB1X2NvbG9yOiBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfY29sb3InKSBhcyBXZWJHTFVuaWZvcm1Mb2NhdGlvbixcbiAgdV90aW1lOiBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ3VfdGltZScpIGFzIFdlYkdMVW5pZm9ybUxvY2F0aW9uLFxuICB1X3Bvc2l0aW9uczogZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICd1X3Bvc2l0aW9ucycpIGFzIFdlYkdMVW5pZm9ybUxvY2F0aW9uXG59XG5jb25zdCBwcyA9IGdsLmNyZWF0ZVRleHR1cmUoKVxuLy8gY29uc3QgcGZiID0gZ2wuY3JlYXRlRnJhbWVCdWZmZXIoKVxuXG5nbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdmVydGljZXNCdWZmZXIpXG5nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX2xvY2F0aW9ucy5hX3ZlcnRpY2VzKVxuZ2wudmVydGV4QXR0cmliUG9pbnRlcihhX2xvY2F0aW9ucy5hX3ZlcnRpY2VzLCAyLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApXG5nbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgc2NyZWVuUXVhZCwgZ2wuU1RBVElDX0RSQVcpXG5cbmdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTApXG5nbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBwcylcbmdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1MsIGdsLkNMQU1QX1RPX0VER0UpXG5nbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9ULCBnbC5DTEFNUF9UT19FREdFKVxuZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX01JTl9GSUxURVIsIGdsLk5FQVJFU1QpXG5nbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVClcbmdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCQSwgYnVmRGltZW5zaW9uc1swXSwgYnVmRGltZW5zaW9uc1sxXSwgMCwgZ2wuUkdCQSwgZ2wuRkxPQVQsIHBvc2l0aW9ucylcbi8vIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgcGZiKVxuLy8gZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQoZ2wuRlJBTUVCVUZGRVIsIGdsLkNPTE9SX0FUVEFDSE1FTlQwLCBnbC5URVhUVVJFXzJELCBwcywgMClcblxuc2xpZGVyLnR5cGUgPSAncmFuZ2UnXG5zbGlkZXIubWluID0gJzAnXG5zbGlkZXIubWF4ID0gJzEwMDAnXG5zbGlkZXIuc3RlcCA9ICc1MCdcbnNsaWRlci52YWx1ZSA9IHNldHRpbmdzLkcudG9TdHJpbmcoKVxuc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgXyA9PiBzZXR0aW5ncy5HID0gTnVtYmVyKHNsaWRlci52YWx1ZSkpXG5cbmNhbnZhcy53aWR0aCA9IEFSRUFbMF1cbmNhbnZhcy5oZWlnaHQgPSBBUkVBWzFdXG5jYW52YXMuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnXG5jYW52YXMuc3R5bGUuYm9yZGVyID0gJzJweCBzb2xpZCBDb3JhbCdcbmRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gJzAnXG5kb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdNaXN0eVJvc2UnXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcylcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2xpZGVyKVxuXG5nbC52aWV3cG9ydCgwLCAwLCBBUkVBWzBdLCBBUkVBWzFdKVxuZ2wuZW5hYmxlKGdsLkNVTExfRkFDRSlcbmdsLmNsZWFyQ29sb3IoMCwgMCwgMCwgMClcbmdsLnVzZVByb2dyYW0ocHJvZ3JhbSlcblxuY29uc3QgcmFmID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZVxuY29uc3QgY2xvY2sgPSB7IHRoZW46IERhdGUubm93KCksIG5vdzogRGF0ZS5ub3coKSB9XG5cbnJhZihmdW5jdGlvbiByZW5kZXIoKSB7XG4gIGNsb2NrLnRoZW4gPSBjbG9jay5ub3dcbiAgY2xvY2subm93ID0gRGF0ZS5ub3coKVxuXG4gIGZvciAoIHZhciBpID0gMCwgRyA9IC1zZXR0aW5ncy5HLCBkVCA9ICggY2xvY2subm93IC0gY2xvY2sudGhlbiApIC8gMTAwMDsgaSA8IHBvc2l0aW9ucy5sZW5ndGg7IGkgKz0gNCApIHtcbiAgICBpZiAoIHBvc2l0aW9uc1sgaSArIDEgXSA8IE1hdGgucmFuZG9tKCkgKiAtMTAwICkge1xuICAgICAgdmVsb2NpdGllc1tpICsgMV0gPSByYW5kTnVtKDYwMCwgOTAwKVxuICAgICAgcG9zaXRpb25zW2ldID0gQVJFQVswXSAvIDJcbiAgICAgIHBvc2l0aW9uc1tpICsgMV0gPSAwXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmVsb2NpdGllc1tpICsgMV0gKz0gZFQgKiBHXG4gICAgICBwb3NpdGlvbnNbaV0gKz0gZFQgKiB2ZWxvY2l0aWVzW2ldXG4gICAgICBwb3NpdGlvbnNbaSArIDFdICs9IGRUICogdmVsb2NpdGllc1tpICsgMV1cbiAgICB9XG4gIH1cbiAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IGdsLkRFUFRIX0JVRkZFUl9CSVQpXG4gIGdsLnVuaWZvcm0xZih1X2xvY2F0aW9ucy51X3RpbWUsIGNsb2NrLm5vdylcbiAgZ2wudW5pZm9ybTFmKHVfbG9jYXRpb25zLnVfSywgc2V0dGluZ3MuSylcbiAgZ2wudW5pZm9ybTNmKHVfbG9jYXRpb25zLnVfY29sb3IsIHNldHRpbmdzLmNvbG9yWzBdLCBzZXR0aW5ncy5jb2xvclsxXSwgc2V0dGluZ3MuY29sb3JbMl0pXG4gIGdsLnVuaWZvcm0xaSh1X2xvY2F0aW9ucy51X3Bvc2l0aW9ucywgMClcbiAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBidWZEaW1lbnNpb25zWzBdLCBidWZEaW1lbnNpb25zWzFdLCAwLCBnbC5SR0JBLCBnbC5GTE9BVCwgcG9zaXRpb25zKVxuICBnbC5kcmF3QXJyYXlzKGdsLlRSSUFOR0xFUywgMCwgcXVhZFNpemUpXG4gIHJhZihyZW5kZXIpXG59KVxuIiwiZXhwb3J0IGZ1bmN0aW9uIHJhbmRJbnQgKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKTogbnVtYmVyIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICggbWF4IC0gbWluICkgKyBtaW4pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByYW5kTnVtICggbWluOiBudW1iZXIsIG1heDogbnVtYmVyICk6IG51bWJlciB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpICogKCBtYXggLSBtaW4gKSArIG1pblxufVxuIl19
